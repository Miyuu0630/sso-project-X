import{_ as P,i as p,Y as j,m as q,a as L,o as C,b as l,w as t,ab as Y,ac as G,n as H,r as s,f as r,t as J,d as w,e as x,ae as K,a4 as Q,E as d,a2 as W}from"./main-0j-tL-il.js";const X={class:"role-management"},Z={class:"card-header"},h={class:"header-actions"},ee={__name:"Role",setup(le){const f=p(!1),v=p(!1),i=p(!1),_=p(null),g=p(),R=p([]),n=j({code:"",name:"",description:"",status:"1"}),U={code:[{required:!0,message:"请输入角色代码",trigger:"blur"}],name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},b=async()=>{try{f.value=!0,R.value=[{id:1,code:"ADMIN",name:"系统管理员",description:"系统最高权限管理员",status:"1",createTime:"2024-01-01 10:00:00"},{id:2,code:"AIRLINE_USER",name:"航司用户",description:"航空公司用户角色",status:"1",createTime:"2024-01-01 10:00:00"},{id:3,code:"ENTERPRISE_USER",name:"企业用户",description:"企业用户角色",status:"1",createTime:"2024-01-01 10:00:00"},{id:4,code:"PERSONAL_USER",name:"个人用户",description:"个人用户角色",status:"1",createTime:"2024-01-01 10:00:00"}]}catch(a){console.error("加载角色列表失败:",a),d.error("加载角色列表失败")}finally{f.value=!1}},N=a=>{_.value=a,Object.assign(n,{code:a.code,name:a.name,description:a.description,status:a.status}),i.value=!0},T=async()=>{try{await g.value.validate(),v.value=!0,_.value?d.success("角色更新成功"):d.success("角色创建成功"),i.value=!1,B(),b()}catch(a){console.error("保存角色失败:",a),d.error("保存角色失败")}finally{v.value=!1}},$=a=>{d.info(`设置角色 ${a.name} 的权限功能开发中...`)},S=async a=>{try{await W.confirm(`确定要删除角色 ${a.name} 吗？`,"确认删除",{type:"warning"}),d.success("角色删除成功"),b()}catch(e){e!=="cancel"&&(console.error("删除角色失败:",e),d.error("删除角色失败"))}},B=()=>{var a;_.value=null,Object.assign(n,{code:"",name:"",description:"",status:"1"}),(a=g.value)==null||a.resetFields()};return q(()=>{b()}),(a,e)=>{const V=s("el-icon"),u=s("el-button"),m=s("el-table-column"),D=s("el-tag"),F=s("el-table"),I=s("el-card"),y=s("el-input"),c=s("el-form-item"),k=s("el-radio"),A=s("el-radio-group"),M=s("el-form"),z=s("el-dialog"),O=G("loading");return C(),L("div",X,[l(I,null,{header:t(()=>[w("div",Z,[l(V,null,{default:t(()=>[l(x(K))]),_:1}),e[8]||(e[8]=w("span",null,"角色管理",-1)),w("div",h,[l(u,{type:"primary",onClick:e[0]||(e[0]=o=>i.value=!0)},{default:t(()=>[l(V,null,{default:t(()=>[l(x(Q))]),_:1}),e[7]||(e[7]=r(" 新增角色 ",-1))]),_:1,__:[7]})])])]),default:t(()=>[Y((C(),H(F,{data:R.value,style:{width:"100%"}},{default:t(()=>[l(m,{prop:"code",label:"角色代码",width:"150"}),l(m,{prop:"name",label:"角色名称",width:"150"}),l(m,{prop:"description",label:"角色描述"}),l(m,{prop:"status",label:"状态",width:"100"},{default:t(o=>[l(D,{type:o.row.status==="1"?"success":"danger"},{default:t(()=>[r(J(o.row.status==="1"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(m,{prop:"createTime",label:"创建时间",width:"160"}),l(m,{label:"操作",width:"200",fixed:"right"},{default:t(o=>[l(u,{type:"primary",size:"small",onClick:E=>N(o.row)},{default:t(()=>e[9]||(e[9]=[r(" 编辑 ",-1)])),_:2,__:[9]},1032,["onClick"]),l(u,{type:"info",size:"small",onClick:E=>$(o.row)},{default:t(()=>e[10]||(e[10]=[r(" 权限 ",-1)])),_:2,__:[10]},1032,["onClick"]),l(u,{type:"danger",size:"small",onClick:E=>S(o.row)},{default:t(()=>e[11]||(e[11]=[r(" 删除 ",-1)])),_:2,__:[11]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,f.value]])]),_:1}),l(z,{modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=o=>i.value=o),title:_.value?"编辑角色":"新增角色",width:"500px"},{footer:t(()=>[l(u,{onClick:e[5]||(e[5]=o=>i.value=!1)},{default:t(()=>e[14]||(e[14]=[r("取消",-1)])),_:1,__:[14]}),l(u,{type:"primary",onClick:T,loading:v.value},{default:t(()=>e[15]||(e[15]=[r(" 确定 ",-1)])),_:1,__:[15]},8,["loading"])]),default:t(()=>[l(M,{ref_key:"roleFormRef",ref:g,model:n,rules:U,"label-width":"100px"},{default:t(()=>[l(c,{label:"角色代码",prop:"code"},{default:t(()=>[l(y,{modelValue:n.code,"onUpdate:modelValue":e[1]||(e[1]=o=>n.code=o),disabled:_.value},null,8,["modelValue","disabled"])]),_:1}),l(c,{label:"角色名称",prop:"name"},{default:t(()=>[l(y,{modelValue:n.name,"onUpdate:modelValue":e[2]||(e[2]=o=>n.name=o)},null,8,["modelValue"])]),_:1}),l(c,{label:"角色描述",prop:"description"},{default:t(()=>[l(y,{modelValue:n.description,"onUpdate:modelValue":e[3]||(e[3]=o=>n.description=o),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),l(c,{label:"状态",prop:"status"},{default:t(()=>[l(A,{modelValue:n.status,"onUpdate:modelValue":e[4]||(e[4]=o=>n.status=o)},{default:t(()=>[l(k,{value:"1"},{default:t(()=>e[12]||(e[12]=[r("启用",-1)])),_:1,__:[12]}),l(k,{value:"0"},{default:t(()=>e[13]||(e[13]=[r("禁用",-1)])),_:1,__:[13]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},oe=P(ee,[["__scopeId","data-v-56f30b84"]]);export{oe as default};
