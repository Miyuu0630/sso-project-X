import{_ as Q,i as N,Y as D,m as W,a as v,o as p,b as e,w as a,d as m,ab as X,r,f as o,e as M,aa as Z,$ as ee,ac as le,n as C,t as i,a1 as y,ae,G as te,H as oe,E as h,a2 as q}from"./main-0j-tL-il.js";const ne={class:"passenger-management"},se={class:"card-header"},ie={class:"search-area"},re={class:"pagination"},ue={key:0,class:"passenger-detail"},de={key:0,class:"special-requests"},ce={key:1,class:"luggage-info"},pe={__name:"Passenger",setup(me){const S=N(!1),w=N(!1),z=N([]),s=N(null),c=D({name:"",idNumber:"",flightNumber:"",bookingStatus:""}),_=D({page:1,size:10,total:0}),P=n=>({id_card:"身份证",passport:"护照",military_id:"军官证",other:"其他"})[n]||"未知",E=n=>({economy:"经济舱",business:"商务舱",first:"头等舱"})[n]||"未知",U=n=>({booked:"info",paid:"warning",checked_in:"primary",boarded:"success",cancelled:"danger"})[n]||"info",$=n=>({booked:"已预订",paid:"已支付",checked_in:"已值机",boarded:"已登机",cancelled:"已取消"})[n]||"未知",b=async()=>{try{S.value=!0;const n=[{id:1,name:"张三",gender:"M",idType:"id_card",idNumber:"110101199001011234",phone:"13800138000",email:"zhangsan@example.com",flightNumber:"CA1234",seatNumber:"12A",cabinClass:"economy",bookingTime:"2024-01-18 10:30:00",bookingStatus:"paid",ticketPrice:1200,specialRequests:["素食餐","靠窗座位"],luggage:{checked:1,carryon:1}},{id:2,name:"李四",gender:"F",idType:"id_card",idNumber:"110101199002021234",phone:"13800138001",email:"lisi@example.com",flightNumber:"CA5678",seatNumber:"8C",cabinClass:"business",bookingTime:"2024-01-18 15:20:00",bookingStatus:"checked_in",ticketPrice:2800,specialRequests:["轮椅服务"],luggage:{checked:2,carryon:1}}];z.value=n,_.total=n.length}catch(n){console.error("加载乘客列表失败:",n),h.error("加载乘客列表失败")}finally{S.value=!1}},R=()=>{Object.assign(c,{name:"",idNumber:"",flightNumber:"",bookingStatus:""}),_.page=1,b()},A=n=>{s.value=n,w.value=!0},F=async n=>{try{await q.confirm(`确定为乘客 ${n.name} 办理值机吗？`,"确认值机"),n.bookingStatus="checked_in",h.success("值机成功")}catch(l){l!=="cancel"&&(console.error("值机失败:",l),h.error("值机失败"))}},I=async n=>{try{await q.confirm(`确定要取消乘客 ${n.name} 的订票吗？`,"确认取消",{type:"warning"}),n.bookingStatus="cancelled",h.success("订票已取消")}catch(l){l!=="cancel"&&(console.error("取消订票失败:",l),h.error("取消订票失败"))}};return W(()=>{b()}),(n,l)=>{const V=r("el-icon"),x=r("el-input"),f=r("el-form-item"),k=r("el-option"),j=r("el-select"),g=r("el-button"),G=r("el-form"),d=r("el-table-column"),T=r("el-tag"),H=r("el-table"),L=r("el-pagination"),O=r("el-card"),u=r("el-descriptions-item"),Y=r("el-descriptions"),J=r("el-dialog"),K=le("loading");return p(),v("div",ne,[e(O,null,{header:a(()=>[m("div",se,[e(V,null,{default:a(()=>[e(M(ae))]),_:1}),l[8]||(l[8]=m("span",null,"乘客管理",-1))])]),default:a(()=>[m("div",ie,[e(G,{model:c,inline:""},{default:a(()=>[e(f,{label:"姓名"},{default:a(()=>[e(x,{modelValue:c.name,"onUpdate:modelValue":l[0]||(l[0]=t=>c.name=t),placeholder:"请输入乘客姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(f,{label:"证件号"},{default:a(()=>[e(x,{modelValue:c.idNumber,"onUpdate:modelValue":l[1]||(l[1]=t=>c.idNumber=t),placeholder:"请输入证件号",clearable:""},null,8,["modelValue"])]),_:1}),e(f,{label:"航班号"},{default:a(()=>[e(x,{modelValue:c.flightNumber,"onUpdate:modelValue":l[2]||(l[2]=t=>c.flightNumber=t),placeholder:"请输入航班号",clearable:""},null,8,["modelValue"])]),_:1}),e(f,{label:"订票状态"},{default:a(()=>[e(j,{modelValue:c.bookingStatus,"onUpdate:modelValue":l[3]||(l[3]=t=>c.bookingStatus=t),placeholder:"请选择状态",clearable:""},{default:a(()=>[e(k,{label:"已预订",value:"booked"}),e(k,{label:"已支付",value:"paid"}),e(k,{label:"已值机",value:"checked_in"}),e(k,{label:"已登机",value:"boarded"}),e(k,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),e(f,null,{default:a(()=>[e(g,{type:"primary",onClick:b},{default:a(()=>[e(V,null,{default:a(()=>[e(M(Z))]),_:1}),l[9]||(l[9]=o(" 搜索 ",-1))]),_:1,__:[9]}),e(g,{onClick:R},{default:a(()=>[e(V,null,{default:a(()=>[e(M(ee))]),_:1}),l[10]||(l[10]=o(" 重置 ",-1))]),_:1,__:[10]})]),_:1})]),_:1},8,["model"])]),X((p(),C(H,{data:z.value,style:{width:"100%"}},{default:a(()=>[e(d,{prop:"name",label:"姓名",width:"120"}),e(d,{prop:"gender",label:"性别",width:"80"},{default:a(t=>[o(i(t.row.gender==="M"?"男":"女"),1)]),_:1}),e(d,{prop:"idType",label:"证件类型",width:"100"},{default:a(t=>[o(i(P(t.row.idType)),1)]),_:1}),e(d,{prop:"idNumber",label:"证件号码",width:"180"}),e(d,{prop:"phone",label:"联系电话",width:"130"}),e(d,{prop:"flightNumber",label:"航班号",width:"120"}),e(d,{prop:"seatNumber",label:"座位号",width:"80"}),e(d,{prop:"bookingTime",label:"订票时间",width:"160"}),e(d,{prop:"bookingStatus",label:"状态",width:"100"},{default:a(t=>[e(T,{type:U(t.row.bookingStatus)},{default:a(()=>[o(i($(t.row.bookingStatus)),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"ticketPrice",label:"票价",width:"100"},{default:a(t=>[o(" ¥"+i(t.row.ticketPrice),1)]),_:1}),e(d,{label:"操作",width:"200",fixed:"right"},{default:a(t=>[e(g,{type:"primary",size:"small",onClick:B=>A(t.row)},{default:a(()=>l[11]||(l[11]=[o(" 详情 ",-1)])),_:2,__:[11]},1032,["onClick"]),t.row.bookingStatus==="paid"?(p(),C(g,{key:0,type:"success",size:"small",onClick:B=>F(t.row)},{default:a(()=>l[12]||(l[12]=[o(" 值机 ",-1)])),_:2,__:[12]},1032,["onClick"])):y("",!0),["booked","paid"].includes(t.row.bookingStatus)?(p(),C(g,{key:1,type:"danger",size:"small",onClick:B=>I(t.row)},{default:a(()=>l[13]||(l[13]=[o(" 取消 ",-1)])),_:2,__:[13]},1032,["onClick"])):y("",!0)]),_:1})]),_:1},8,["data"])),[[K,S.value]]),m("div",re,[e(L,{"current-page":_.page,"onUpdate:currentPage":l[4]||(l[4]=t=>_.page=t),"page-size":_.size,"onUpdate:pageSize":l[5]||(l[5]=t=>_.size=t),"page-sizes":[10,20,50,100],total:_.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:b,onCurrentChange:b},null,8,["current-page","page-size","total"])])]),_:1}),e(J,{modelValue:w.value,"onUpdate:modelValue":l[7]||(l[7]=t=>w.value=t),title:"乘客详情",width:"600px"},{footer:a(()=>[e(g,{onClick:l[6]||(l[6]=t=>w.value=!1)},{default:a(()=>l[16]||(l[16]=[o("关闭",-1)])),_:1,__:[16]})]),default:a(()=>[s.value?(p(),v("div",ue,[e(Y,{column:2,border:""},{default:a(()=>[e(u,{label:"姓名"},{default:a(()=>[o(i(s.value.name),1)]),_:1}),e(u,{label:"性别"},{default:a(()=>[o(i(s.value.gender==="M"?"男":"女"),1)]),_:1}),e(u,{label:"证件类型"},{default:a(()=>[o(i(P(s.value.idType)),1)]),_:1}),e(u,{label:"证件号码"},{default:a(()=>[o(i(s.value.idNumber),1)]),_:1}),e(u,{label:"联系电话"},{default:a(()=>[o(i(s.value.phone),1)]),_:1}),e(u,{label:"邮箱"},{default:a(()=>[o(i(s.value.email),1)]),_:1}),e(u,{label:"航班号"},{default:a(()=>[o(i(s.value.flightNumber),1)]),_:1}),e(u,{label:"座位号"},{default:a(()=>[o(i(s.value.seatNumber),1)]),_:1}),e(u,{label:"舱位等级"},{default:a(()=>[o(i(E(s.value.cabinClass)),1)]),_:1}),e(u,{label:"票价"},{default:a(()=>[o(" ¥"+i(s.value.ticketPrice),1)]),_:1}),e(u,{label:"订票时间"},{default:a(()=>[o(i(s.value.bookingTime),1)]),_:1}),e(u,{label:"状态"},{default:a(()=>[e(T,{type:U(s.value.bookingStatus)},{default:a(()=>[o(i($(s.value.bookingStatus)),1)]),_:1},8,["type"])]),_:1})]),_:1}),s.value.specialRequests?(p(),v("div",de,[l[14]||(l[14]=m("h4",null,"特殊需求",-1)),(p(!0),v(te,null,oe(s.value.specialRequests,t=>(p(),C(T,{key:t,style:{"margin-right":"8px","margin-bottom":"8px"}},{default:a(()=>[o(i(t),1)]),_:2},1024))),128))])):y("",!0),s.value.luggage?(p(),v("div",ce,[l[15]||(l[15]=m("h4",null,"行李信息",-1)),m("p",null,"托运行李："+i(s.value.luggage.checked)+"件",1),m("p",null,"手提行李："+i(s.value.luggage.carryon)+"件",1)])):y("",!0)])):y("",!0)]),_:1},8,["modelValue"])])}}},ge=Q(pe,[["__scopeId","data-v-36413bea"]]);export{ge as default};
