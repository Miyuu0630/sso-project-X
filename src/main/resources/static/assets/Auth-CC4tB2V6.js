import{_ as $,i as v,Y as q,m as J,a as b,o as _,b as e,w as t,d as r,a1 as h,r as s,e as y,af as B,f as u,B as Q,t as p,$ as G,G as O,H as K,ag as Z,E as V,n as ee}from"./main-0j-tL-il.js";const te={class:"enterprise-auth"},le={class:"card-header"},ae={class:"auth-status"},oe={key:0,class:"auth-form"},ne={key:1,class:"auth-info"},se={key:2,class:"audit-records"},re={key:0,class:"audit-remark"},ie={__name:"Auth",setup(de){const k=v(),N=v(!1),i=v("unverified"),C=v([]),x=v([]),P=v([]),o=q({companyName:"",creditCode:"",legalPerson:"",contactName:"",contactPhone:"",contactEmail:"",remark:""}),f=q({companyName:"",creditCode:"",legalPerson:"",authTime:"",expireTime:""}),E={companyName:[{required:!0,message:"请输入企业名称",trigger:"blur"}],creditCode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{pattern:/^[0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}$/,message:"请输入正确的统一社会信用代码",trigger:"blur"}],legalPerson:[{required:!0,message:"请输入法定代表人",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系人电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],contactEmail:[{required:!0,message:"请输入联系人邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}]},F=()=>({unverified:"企业认证",pending:"认证审核中",verified:"认证已通过",rejected:"认证被拒绝"})[i.value],j=()=>({unverified:"info",pending:"warning",verified:"success",rejected:"error"})[i.value],A=()=>({unverified:"请完善企业信息并上传相关证件进行认证",pending:"您的认证申请正在审核中，请耐心等待",verified:"恭喜！您的企业认证已通过",rejected:"很抱歉，您的认证申请被拒绝，请查看审核记录并重新提交"})[i.value],M=n=>{const l=n.type.startsWith("image/")||n.type==="application/pdf",m=n.size/1024/1024<10;return l||V.error("只能上传图片或PDF文件!"),m||V.error("上传文件大小不能超过 10MB!"),l&&m},T=n=>(V.success("文件上传成功"),Promise.resolve()),S=async()=>{try{await k.value.validate(),N.value=!0,i.value="pending",V.success("认证申请已提交，请等待审核"),P.value.unshift({id:Date.now(),title:"提交认证申请",description:"企业认证申请已提交，等待审核",time:new Date().toLocaleString("zh-CN"),type:"primary"})}catch(n){console.error("提交认证失败:",n),V.error("提交认证失败")}finally{N.value=!1}},D=()=>{var n;(n=k.value)==null||n.resetFields(),C.value=[],x.value=[]},L=()=>{i.value="unverified",i.value==="verified"&&Object.assign(f,{companyName:"示例科技有限公司",creditCode:"91110000123456789X",legalPerson:"张三",authTime:"2024-01-15 10:30:00",expireTime:"2025-01-15"})};return J(()=>{L()}),(n,l)=>{const m=s("el-icon"),R=s("el-alert"),c=s("el-input"),d=s("el-form-item"),U=s("el-upload"),w=s("el-button"),z=s("el-form"),g=s("el-descriptions-item"),H=s("el-tag"),I=s("el-descriptions"),W=s("el-timeline-item"),X=s("el-timeline"),Y=s("el-card");return _(),b("div",te,[e(Y,null,{header:t(()=>[r("div",le,[e(m,null,{default:t(()=>[e(y(Z))]),_:1}),l[7]||(l[7]=r("span",null,"企业认证",-1))])]),default:t(()=>[r("div",ae,[e(R,{title:F(),type:j(),description:A(),"show-icon":"",closable:!1},null,8,["title","type","description"])]),i.value!=="verified"?(_(),b("div",oe,[e(z,{ref_key:"formRef",ref:k,model:o,rules:E,"label-width":"120px"},{default:t(()=>[e(d,{label:"企业名称",prop:"companyName"},{default:t(()=>[e(c,{modelValue:o.companyName,"onUpdate:modelValue":l[0]||(l[0]=a=>o.companyName=a),placeholder:"请输入企业名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"统一社会信用代码",prop:"creditCode"},{default:t(()=>[e(c,{modelValue:o.creditCode,"onUpdate:modelValue":l[1]||(l[1]=a=>o.creditCode=a),placeholder:"请输入统一社会信用代码"},null,8,["modelValue"])]),_:1}),e(d,{label:"法定代表人",prop:"legalPerson"},{default:t(()=>[e(c,{modelValue:o.legalPerson,"onUpdate:modelValue":l[2]||(l[2]=a=>o.legalPerson=a),placeholder:"请输入法定代表人姓名"},null,8,["modelValue"])]),_:1}),e(d,{label:"营业执照",prop:"businessLicense"},{default:t(()=>[e(U,{class:"upload-demo",drag:"",action:"#","before-upload":M,"http-request":T,"file-list":C.value,accept:"image/*,.pdf"},{tip:t(()=>l[8]||(l[8]=[r("div",{class:"el-upload__tip"}," 支持 jpg/png/pdf 文件，且不超过 10MB ",-1)])),default:t(()=>[e(m,{class:"el-icon--upload"},{default:t(()=>[e(y(B))]),_:1}),l[9]||(l[9]=r("div",{class:"el-upload__text"},[u(" 将文件拖到此处，或"),r("em",null,"点击上传")],-1))]),_:1,__:[9]},8,["file-list"])]),_:1}),e(d,{label:"组织机构代码证",prop:"organizationCode"},{default:t(()=>[e(U,{class:"upload-demo",drag:"",action:"#","before-upload":M,"http-request":T,"file-list":x.value,accept:"image/*,.pdf"},{tip:t(()=>l[10]||(l[10]=[r("div",{class:"el-upload__tip"}," 支持 jpg/png/pdf 文件，且不超过 10MB ",-1)])),default:t(()=>[e(m,{class:"el-icon--upload"},{default:t(()=>[e(y(B))]),_:1}),l[11]||(l[11]=r("div",{class:"el-upload__text"},[u(" 将文件拖到此处，或"),r("em",null,"点击上传")],-1))]),_:1,__:[11]},8,["file-list"])]),_:1}),e(d,{label:"联系人姓名",prop:"contactName"},{default:t(()=>[e(c,{modelValue:o.contactName,"onUpdate:modelValue":l[3]||(l[3]=a=>o.contactName=a),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1}),e(d,{label:"联系人电话",prop:"contactPhone"},{default:t(()=>[e(c,{modelValue:o.contactPhone,"onUpdate:modelValue":l[4]||(l[4]=a=>o.contactPhone=a),placeholder:"请输入联系人电话"},null,8,["modelValue"])]),_:1}),e(d,{label:"联系人邮箱",prop:"contactEmail"},{default:t(()=>[e(c,{modelValue:o.contactEmail,"onUpdate:modelValue":l[5]||(l[5]=a=>o.contactEmail=a),placeholder:"请输入联系人邮箱"},null,8,["modelValue"])]),_:1}),e(d,{label:"备注说明",prop:"remark"},{default:t(()=>[e(c,{modelValue:o.remark,"onUpdate:modelValue":l[6]||(l[6]=a=>o.remark=a),type:"textarea",rows:4,placeholder:"请输入备注说明"},null,8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(w,{type:"primary",onClick:S,loading:N.value,disabled:i.value==="pending"},{default:t(()=>[e(m,null,{default:t(()=>[e(y(Q))]),_:1}),u(" "+p(i.value==="pending"?"审核中":"提交认证"),1)]),_:1},8,["loading","disabled"]),e(w,{onClick:D},{default:t(()=>[e(m,null,{default:t(()=>[e(y(G))]),_:1}),l[12]||(l[12]=u(" 重置 ",-1))]),_:1,__:[12]})]),_:1})]),_:1},8,["model"])])):h("",!0),i.value==="verified"?(_(),b("div",ne,[e(I,{title:"认证信息",column:2,border:""},{default:t(()=>[e(g,{label:"企业名称"},{default:t(()=>[u(p(f.companyName),1)]),_:1}),e(g,{label:"统一社会信用代码"},{default:t(()=>[u(p(f.creditCode),1)]),_:1}),e(g,{label:"法定代表人"},{default:t(()=>[u(p(f.legalPerson),1)]),_:1}),e(g,{label:"认证时间"},{default:t(()=>[u(p(f.authTime),1)]),_:1}),e(g,{label:"有效期至"},{default:t(()=>[u(p(f.expireTime),1)]),_:1}),e(g,{label:"认证状态"},{default:t(()=>[e(H,{type:"success"},{default:t(()=>l[13]||(l[13]=[u("已认证",-1)])),_:1,__:[13]})]),_:1})]),_:1})])):h("",!0),P.value.length>0?(_(),b("div",se,[l[14]||(l[14]=r("h3",null,"审核记录",-1)),e(X,null,{default:t(()=>[(_(!0),b(O,null,K(P.value,a=>(_(),ee(W,{key:a.id,timestamp:a.time,type:a.type},{default:t(()=>[r("h4",null,p(a.title),1),r("p",null,p(a.description),1),a.remark?(_(),b("p",re,"备注："+p(a.remark),1)):h("",!0)]),_:2},1032,["timestamp","type"]))),128))]),_:1})])):h("",!0)]),_:1})])}}},pe=$(ie,[["__scopeId","data-v-e4727588"]]);export{pe as default};
