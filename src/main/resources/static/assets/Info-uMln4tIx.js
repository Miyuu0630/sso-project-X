import{_ as D,i as v,Y as N,m as z,a as A,o as b,b as e,w as l,r,n as T,e as c,a4 as E,f as U,B as F,$ as M,d as w,U as P,a0 as h,E as m}from"./main-0j-tL-il.js";const $={class:"airline-info"},j={class:"card-header"},J=["src"],Z={__name:"Info",setup(H){const _=v(),g=v(!1),o=N({name:"",iataCode:"",icaoCode:"",callsign:"",country:"",foundedDate:"",fleetSize:0,operatingStatus:"active",phone:"",email:"",headquarters:"",mainRoutes:"",description:"",logo:""}),I={name:[{required:!0,message:"请输入航司名称",trigger:"blur"}],iataCode:[{required:!0,message:"请输入IATA代码",trigger:"blur"},{pattern:/^[A-Z]{2}$/,message:"IATA代码必须是2位大写字母",trigger:"blur"}],icaoCode:[{required:!0,message:"请输入ICAO代码",trigger:"blur"},{pattern:/^[A-Z]{3}$/,message:"ICAO代码必须是3位大写字母",trigger:"blur"}],country:[{required:!0,message:"请选择所属国家",trigger:"change"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}]},V=async()=>{try{const n=await h.get("/api/airline/info");n.data.code===200&&Object.assign(o,n.data.data)}catch(n){console.error("加载航司信息失败:",n),Object.assign(o,{name:"中国国际航空股份有限公司",iataCode:"CA",icaoCode:"CCA",callsign:"AIR CHINA",country:"CN",foundedDate:"1988-07-01",fleetSize:400,operatingStatus:"active",phone:"400-100-0999",email:"info@airchina.com",headquarters:"北京市顺义区天竺空港工业区A区天柱路28号",mainRoutes:"北京-上海、北京-广州、北京-深圳、北京-成都、国际航线等",description:"中国国际航空股份有限公司是中国唯一载国旗飞行的民用航空公司，承担着中国国家领导人出国访问的专机任务。",logo:""})}},O=async()=>{try{await _.value.validate(),g.value=!0;const n=await h.put("/api/airline/info",o);n.data.code===200?m.success("航司信息保存成功"):m.error(n.data.message||"保存失败")}catch(n){console.error("保存航司信息失败:",n),m.error("保存失败")}finally{g.value=!1}},k=()=>{var n;(n=_.value)==null||n.resetFields(),V()},q=n=>{const a=n.type==="image/jpeg"||n.type==="image/png",s=n.size/1024/1024<2;return a||m.error("上传LOGO图片只能是 JPG/PNG 格式!"),s||m.error("上传LOGO图片大小不能超过 2MB!"),a&&s},R=n=>{const a=new FileReader;a.onload=s=>{o.logo=s.target.result,m.success("LOGO上传成功")},a.readAsDataURL(n.file)};return z(()=>{V()}),(n,a)=>{const s=r("el-icon"),p=r("el-input"),d=r("el-form-item"),u=r("el-col"),f=r("el-row"),i=r("el-option"),y=r("el-select"),S=r("el-date-picker"),x=r("el-input-number"),G=r("el-upload"),C=r("el-button"),L=r("el-form"),B=r("el-card");return b(),A("div",$,[e(B,null,{header:l(()=>[w("div",j,[e(s,null,{default:l(()=>[e(c(P))]),_:1}),a[13]||(a[13]=w("span",null,"航司信息",-1))])]),default:l(()=>[e(L,{ref_key:"formRef",ref:_,model:o,rules:I,"label-width":"120px",class:"airline-form"},{default:l(()=>[e(f,{gutter:20},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(d,{label:"航司名称",prop:"name"},{default:l(()=>[e(p,{modelValue:o.name,"onUpdate:modelValue":a[0]||(a[0]=t=>o.name=t),placeholder:"请输入航司名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(d,{label:"IATA代码",prop:"iataCode"},{default:l(()=>[e(p,{modelValue:o.iataCode,"onUpdate:modelValue":a[1]||(a[1]=t=>o.iataCode=t),placeholder:"请输入IATA代码",maxlength:"2"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:20},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(d,{label:"ICAO代码",prop:"icaoCode"},{default:l(()=>[e(p,{modelValue:o.icaoCode,"onUpdate:modelValue":a[2]||(a[2]=t=>o.icaoCode=t),placeholder:"请输入ICAO代码",maxlength:"3"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(d,{label:"呼号",prop:"callsign"},{default:l(()=>[e(p,{modelValue:o.callsign,"onUpdate:modelValue":a[3]||(a[3]=t=>o.callsign=t),placeholder:"请输入呼号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:20},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(d,{label:"所属国家",prop:"country"},{default:l(()=>[e(y,{modelValue:o.country,"onUpdate:modelValue":a[4]||(a[4]=t=>o.country=t),placeholder:"请选择国家",style:{width:"100%"}},{default:l(()=>[e(i,{label:"中国",value:"CN"}),e(i,{label:"美国",value:"US"}),e(i,{label:"英国",value:"GB"}),e(i,{label:"法国",value:"FR"}),e(i,{label:"德国",value:"DE"}),e(i,{label:"日本",value:"JP"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(d,{label:"成立时间",prop:"foundedDate"},{default:l(()=>[e(S,{modelValue:o.foundedDate,"onUpdate:modelValue":a[5]||(a[5]=t=>o.foundedDate=t),type:"date",placeholder:"请选择成立时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:20},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(d,{label:"机队规模",prop:"fleetSize"},{default:l(()=>[e(x,{modelValue:o.fleetSize,"onUpdate:modelValue":a[6]||(a[6]=t=>o.fleetSize=t),min:0,placeholder:"请输入机队规模",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(d,{label:"运营状态",prop:"operatingStatus"},{default:l(()=>[e(y,{modelValue:o.operatingStatus,"onUpdate:modelValue":a[7]||(a[7]=t=>o.operatingStatus=t),placeholder:"请选择运营状态",style:{width:"100%"}},{default:l(()=>[e(i,{label:"正常运营",value:"active"}),e(i,{label:"暂停运营",value:"suspended"}),e(i,{label:"维护中",value:"maintenance"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:20},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(d,{label:"联系电话",prop:"phone"},{default:l(()=>[e(p,{modelValue:o.phone,"onUpdate:modelValue":a[8]||(a[8]=t=>o.phone=t),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(d,{label:"联系邮箱",prop:"email"},{default:l(()=>[e(p,{modelValue:o.email,"onUpdate:modelValue":a[9]||(a[9]=t=>o.email=t),placeholder:"请输入联系邮箱"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{label:"总部地址",prop:"headquarters"},{default:l(()=>[e(p,{modelValue:o.headquarters,"onUpdate:modelValue":a[10]||(a[10]=t=>o.headquarters=t),placeholder:"请输入总部地址"},null,8,["modelValue"])]),_:1}),e(d,{label:"主要航线",prop:"mainRoutes"},{default:l(()=>[e(p,{modelValue:o.mainRoutes,"onUpdate:modelValue":a[11]||(a[11]=t=>o.mainRoutes=t),type:"textarea",rows:3,placeholder:"请输入主要航线信息"},null,8,["modelValue"])]),_:1}),e(d,{label:"航司简介",prop:"description"},{default:l(()=>[e(p,{modelValue:o.description,"onUpdate:modelValue":a[12]||(a[12]=t=>o.description=t),type:"textarea",rows:4,placeholder:"请输入航司简介"},null,8,["modelValue"])]),_:1}),e(d,{label:"航司LOGO",prop:"logo"},{default:l(()=>[e(G,{class:"logo-uploader",action:"#","show-file-list":!1,"before-upload":q,"http-request":R},{default:l(()=>[o.logo?(b(),A("img",{key:0,src:o.logo,class:"logo"},null,8,J)):(b(),T(s,{key:1,class:"logo-uploader-icon"},{default:l(()=>[e(c(E))]),_:1}))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(C,{type:"primary",onClick:O,loading:g.value},{default:l(()=>[e(s,null,{default:l(()=>[e(c(F))]),_:1}),a[14]||(a[14]=U(" 保存信息 ",-1))]),_:1,__:[14]},8,["loading"]),e(C,{onClick:k},{default:l(()=>[e(s,null,{default:l(()=>[e(c(M))]),_:1}),a[15]||(a[15]=U(" 重置 ",-1))]),_:1,__:[15]})]),_:1})]),_:1},8,["model"])]),_:1})])}}},K=D(Z,[["__scopeId","data-v-71bb3146"]]);export{K as default};
