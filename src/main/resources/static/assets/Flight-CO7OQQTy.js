import{_ as X,i as V,Y as F,m as Z,a as ee,o as q,b as e,w as a,d as y,ab as le,r as u,f as p,e as C,aa as ae,$ as te,ac as re,n as oe,t as x,U as ue,a4 as ie,E as v,a2 as de}from"./main-0j-tL-il.js";const ne={class:"flight-management"},se={class:"card-header"},pe={class:"header-actions"},me={class:"search-area"},fe={class:"pagination"},ge={__name:"Flight",setup(_e){const k=V(!1),N=V(!1),b=V(!1),w=V(null),U=V(),A=V([]),d=F({flightNumber:"",departure:"",arrival:"",status:""}),g=F({page:1,size:10,total:0}),o=F({flightNumber:"",aircraft:"",departure:"",arrival:"",departureTime:"",arrivalTime:"",seatCount:0,price:0,remark:""}),S={flightNumber:[{required:!0,message:"请输入航班号",trigger:"blur"}],aircraft:[{required:!0,message:"请选择机型",trigger:"change"}],departure:[{required:!0,message:"请输入出发地",trigger:"blur"}],arrival:[{required:!0,message:"请输入目的地",trigger:"blur"}],departureTime:[{required:!0,message:"请选择起飞时间",trigger:"change"}],arrivalTime:[{required:!0,message:"请选择到达时间",trigger:"change"}]},j=r=>({scheduled:"info",boarding:"warning",departed:"primary",arrived:"success",delayed:"warning",cancelled:"danger"})[r]||"info",E=r=>({scheduled:"计划",boarding:"登机",departed:"已起飞",arrived:"已到达",delayed:"延误",cancelled:"取消"})[r]||"未知",_=async()=>{try{k.value=!0;const r=[{id:1,flightNumber:"CA1234",departure:"北京首都机场",arrival:"上海浦东机场",aircraft:"B737",departureTime:"2024-01-19 08:00",arrivalTime:"2024-01-19 10:30",actualDepartureTime:"2024-01-19 08:05",actualArrivalTime:"2024-01-19 10:35",status:"arrived",passengers:156,seatCount:180,price:1200},{id:2,flightNumber:"CA5678",departure:"上海浦东机场",arrival:"广州白云机场",aircraft:"A320",departureTime:"2024-01-19 14:00",arrivalTime:"2024-01-19 16:30",actualDepartureTime:"",actualArrivalTime:"",status:"scheduled",passengers:0,seatCount:160,price:800}];A.value=r,g.total=r.length}catch(r){console.error("加载航班列表失败:",r),v.error("加载航班列表失败")}finally{k.value=!1}},O=()=>{Object.assign(d,{flightNumber:"",departure:"",arrival:"",status:""}),g.page=1,_()},R=r=>{w.value=r,Object.assign(o,{flightNumber:r.flightNumber,aircraft:r.aircraft,departure:r.departure,arrival:r.arrival,departureTime:r.departureTime,arrivalTime:r.arrivalTime,seatCount:r.seatCount,price:r.price,remark:r.remark||""}),b.value=!0},I=async()=>{try{await U.value.validate(),N.value=!0,w.value?v.success("航班信息更新成功"):v.success("航班创建成功"),b.value=!1,G(),_()}catch(r){console.error("保存航班失败:",r),v.error("保存航班失败")}finally{N.value=!1}},P=r=>{v.info(`查看航班 ${r.flightNumber} 详情功能开发中...`)},Y=async r=>{try{await de.confirm(`确定要删除航班 ${r.flightNumber} 吗？`,"确认删除",{type:"warning"}),v.success("航班删除成功"),_()}catch(l){l!=="cancel"&&(console.error("删除航班失败:",l),v.error("删除航班失败"))}},G=()=>{var r;w.value=null,Object.assign(o,{flightNumber:"",aircraft:"",departure:"",arrival:"",departureTime:"",arrivalTime:"",seatCount:0,price:0,remark:""}),(r=U.value)==null||r.resetFields()};return Z(()=>{_()}),(r,l)=>{const h=u("el-icon"),m=u("el-button"),c=u("el-input"),i=u("el-form-item"),n=u("el-option"),z=u("el-select"),B=u("el-form"),s=u("el-table-column"),H=u("el-tag"),J=u("el-table"),K=u("el-pagination"),L=u("el-card"),f=u("el-col"),T=u("el-row"),D=u("el-date-picker"),$=u("el-input-number"),Q=u("el-dialog"),W=re("loading");return q(),ee("div",ne,[e(L,null,{header:a(()=>[y("div",se,[e(h,null,{default:a(()=>[e(C(ue))]),_:1}),l[19]||(l[19]=y("span",null,"航班管理",-1)),y("div",pe,[e(m,{type:"primary",onClick:l[0]||(l[0]=t=>b.value=!0)},{default:a(()=>[e(h,null,{default:a(()=>[e(C(ie))]),_:1}),l[18]||(l[18]=p(" 新增航班 ",-1))]),_:1,__:[18]})])])]),default:a(()=>[y("div",me,[e(B,{model:d,inline:""},{default:a(()=>[e(i,{label:"航班号"},{default:a(()=>[e(c,{modelValue:d.flightNumber,"onUpdate:modelValue":l[1]||(l[1]=t=>d.flightNumber=t),placeholder:"请输入航班号",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"出发地"},{default:a(()=>[e(c,{modelValue:d.departure,"onUpdate:modelValue":l[2]||(l[2]=t=>d.departure=t),placeholder:"请输入出发地",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"目的地"},{default:a(()=>[e(c,{modelValue:d.arrival,"onUpdate:modelValue":l[3]||(l[3]=t=>d.arrival=t),placeholder:"请输入目的地",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"状态"},{default:a(()=>[e(z,{modelValue:d.status,"onUpdate:modelValue":l[4]||(l[4]=t=>d.status=t),placeholder:"请选择状态",clearable:""},{default:a(()=>[e(n,{label:"计划",value:"scheduled"}),e(n,{label:"登机",value:"boarding"}),e(n,{label:"已起飞",value:"departed"}),e(n,{label:"已到达",value:"arrived"}),e(n,{label:"延误",value:"delayed"}),e(n,{label:"取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:a(()=>[e(m,{type:"primary",onClick:_},{default:a(()=>[e(h,null,{default:a(()=>[e(C(ae))]),_:1}),l[20]||(l[20]=p(" 搜索 ",-1))]),_:1,__:[20]}),e(m,{onClick:O},{default:a(()=>[e(h,null,{default:a(()=>[e(C(te))]),_:1}),l[21]||(l[21]=p(" 重置 ",-1))]),_:1,__:[21]})]),_:1})]),_:1},8,["model"])]),le((q(),oe(J,{data:A.value,style:{width:"100%"}},{default:a(()=>[e(s,{prop:"flightNumber",label:"航班号",width:"120"}),e(s,{prop:"route",label:"航线",width:"200"},{default:a(t=>[p(x(t.row.departure)+" → "+x(t.row.arrival),1)]),_:1}),e(s,{prop:"aircraft",label:"机型",width:"120"}),e(s,{prop:"departureTime",label:"计划起飞",width:"160"}),e(s,{prop:"arrivalTime",label:"计划到达",width:"160"}),e(s,{prop:"actualDepartureTime",label:"实际起飞",width:"160"}),e(s,{prop:"actualArrivalTime",label:"实际到达",width:"160"}),e(s,{prop:"status",label:"状态",width:"100"},{default:a(t=>[e(H,{type:j(t.row.status)},{default:a(()=>[p(x(E(t.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"passengers",label:"乘客数",width:"80"}),e(s,{label:"操作",width:"200",fixed:"right"},{default:a(t=>[e(m,{type:"primary",size:"small",onClick:M=>R(t.row)},{default:a(()=>l[22]||(l[22]=[p(" 编辑 ",-1)])),_:2,__:[22]},1032,["onClick"]),e(m,{type:"info",size:"small",onClick:M=>P(t.row)},{default:a(()=>l[23]||(l[23]=[p(" 详情 ",-1)])),_:2,__:[23]},1032,["onClick"]),e(m,{type:"danger",size:"small",onClick:M=>Y(t.row)},{default:a(()=>l[24]||(l[24]=[p(" 删除 ",-1)])),_:2,__:[24]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[W,k.value]]),y("div",fe,[e(K,{"current-page":g.page,"onUpdate:currentPage":l[5]||(l[5]=t=>g.page=t),"page-size":g.size,"onUpdate:pageSize":l[6]||(l[6]=t=>g.size=t),"page-sizes":[10,20,50,100],total:g.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:_,onCurrentChange:_},null,8,["current-page","page-size","total"])])]),_:1}),e(Q,{modelValue:b.value,"onUpdate:modelValue":l[17]||(l[17]=t=>b.value=t),title:w.value?"编辑航班":"新增航班",width:"800px"},{footer:a(()=>[e(m,{onClick:l[16]||(l[16]=t=>b.value=!1)},{default:a(()=>l[25]||(l[25]=[p("取消",-1)])),_:1,__:[25]}),e(m,{type:"primary",onClick:I,loading:N.value},{default:a(()=>l[26]||(l[26]=[p(" 确定 ",-1)])),_:1,__:[26]},8,["loading"])]),default:a(()=>[e(B,{ref_key:"flightFormRef",ref:U,model:o,rules:S,"label-width":"120px"},{default:a(()=>[e(T,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(i,{label:"航班号",prop:"flightNumber"},{default:a(()=>[e(c,{modelValue:o.flightNumber,"onUpdate:modelValue":l[7]||(l[7]=t=>o.flightNumber=t),placeholder:"请输入航班号"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:a(()=>[e(i,{label:"机型",prop:"aircraft"},{default:a(()=>[e(z,{modelValue:o.aircraft,"onUpdate:modelValue":l[8]||(l[8]=t=>o.aircraft=t),placeholder:"请选择机型",style:{width:"100%"}},{default:a(()=>[e(n,{label:"Boeing 737",value:"B737"}),e(n,{label:"Boeing 777",value:"B777"}),e(n,{label:"Airbus A320",value:"A320"}),e(n,{label:"Airbus A330",value:"A330"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(T,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(i,{label:"出发地",prop:"departure"},{default:a(()=>[e(c,{modelValue:o.departure,"onUpdate:modelValue":l[9]||(l[9]=t=>o.departure=t),placeholder:"请输入出发地"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:a(()=>[e(i,{label:"目的地",prop:"arrival"},{default:a(()=>[e(c,{modelValue:o.arrival,"onUpdate:modelValue":l[10]||(l[10]=t=>o.arrival=t),placeholder:"请输入目的地"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(T,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(i,{label:"计划起飞时间",prop:"departureTime"},{default:a(()=>[e(D,{modelValue:o.departureTime,"onUpdate:modelValue":l[11]||(l[11]=t=>o.departureTime=t),type:"datetime",placeholder:"请选择起飞时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:a(()=>[e(i,{label:"计划到达时间",prop:"arrivalTime"},{default:a(()=>[e(D,{modelValue:o.arrivalTime,"onUpdate:modelValue":l[12]||(l[12]=t=>o.arrivalTime=t),type:"datetime",placeholder:"请选择到达时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(T,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(i,{label:"座位数",prop:"seatCount"},{default:a(()=>[e($,{modelValue:o.seatCount,"onUpdate:modelValue":l[13]||(l[13]=t=>o.seatCount=t),min:1,placeholder:"请输入座位数",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:a(()=>[e(i,{label:"票价",prop:"price"},{default:a(()=>[e($,{modelValue:o.price,"onUpdate:modelValue":l[14]||(l[14]=t=>o.price=t),min:0,precision:2,placeholder:"请输入票价",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{label:"备注",prop:"remark"},{default:a(()=>[e(c,{modelValue:o.remark,"onUpdate:modelValue":l[15]||(l[15]=t=>o.remark=t),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ve=X(ge,[["__scopeId","data-v-fc5fe008"]]);export{ve as default};
