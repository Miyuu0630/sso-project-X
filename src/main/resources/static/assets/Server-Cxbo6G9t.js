import{_ as I,i as b,Y as C,m as N,ah as z,a as L,o as O,b as e,w as t,d as n,r as i,t as a,f as l,e as k,q as j,$ as G,a2 as J,E as _}from"./main-0j-tL-il.js";const q={class:"server-monitor"},K={class:"card-header"},Q={class:"header-actions"},R={class:"system-info"},W={class:"metric-content"},Y={class:"metric-content"},A={class:"metric-content"},F={class:"service-status"},H={class:"system-details"},X={__name:"Server",setup(Z){const h=b(""),f=b(null),o=C({cpuUsage:45,memoryUsage:68,diskUsage:32}),c=C({os:"Windows 10 Pro",javaVersion:"OpenJDK 17.0.2",totalMemory:"16 GB",freeMemory:"5.2 GB",cpuCores:8,startTime:"2024-01-19 09:00:00",uptime:"5小时30分钟"}),B=b([{id:1,name:"SSO Server",port:8081,status:"running",uptime:"5小时30分钟",memory:"256 MB",cpu:"12%"},{id:2,name:"SSO Client Backend",port:8082,status:"running",uptime:"5小时25分钟",memory:"128 MB",cpu:"8%"},{id:3,name:"Redis",port:6379,status:"running",uptime:"2天15小时",memory:"64 MB",cpu:"2%"},{id:4,name:"MySQL",port:3306,status:"running",uptime:"7天12小时",memory:"512 MB",cpu:"5%"}]),g=r=>r<50?"#67c23a":r<80?"#e6a23c":"#f56c6c",U=()=>{h.value=new Date().toLocaleString("zh-CN")},S=()=>{o.cpuUsage=Math.floor(Math.random()*100),o.memoryUsage=Math.floor(Math.random()*100),o.diskUsage=Math.floor(Math.random()*100),_.success("数据已刷新")},$=async r=>{try{const s=r.status==="running"?"停止":"启动";await J.confirm(`确定要${s}服务 ${r.name} 吗？`,"确认操作",{type:"warning"}),r.status=r.status==="running"?"stopped":"running",_.success(`服务 ${r.name} 已${s}`)}catch(s){s!=="cancel"&&(console.error("操作服务失败:",s),_.error("操作失败"))}},x=r=>{_.info(`查看服务 ${r.name} 的日志功能开发中...`)};return N(()=>{U(),f.value=setInterval(U,1e3)}),z(()=>{f.value&&clearInterval(f.value)}),(r,s)=>{const M=i("el-icon"),y=i("el-button"),v=i("el-progress"),m=i("el-card"),w=i("el-col"),D=i("el-row"),d=i("el-table-column"),P=i("el-tag"),T=i("el-table"),u=i("el-descriptions-item"),V=i("el-descriptions");return O(),L("div",q,[e(m,null,{header:t(()=>[n("div",K,[e(M,null,{default:t(()=>[e(k(j))]),_:1}),s[1]||(s[1]=n("span",null,"服务器监控",-1)),n("div",Q,[e(y,{onClick:S},{default:t(()=>[e(M,null,{default:t(()=>[e(k(G))]),_:1}),s[0]||(s[0]=l(" 刷新 ",-1))]),_:1,__:[0]})])])]),default:t(()=>[n("div",R,[e(D,{gutter:20},{default:t(()=>[e(w,{span:8},{default:t(()=>[e(m,{class:"info-card"},{header:t(()=>s[2]||(s[2]=[n("span",null,"CPU使用率",-1)])),default:t(()=>[n("div",W,[e(v,{type:"circle",percentage:o.cpuUsage,color:g(o.cpuUsage)},null,8,["percentage","color"]),n("p",null,a(o.cpuUsage)+"%",1)])]),_:1})]),_:1}),e(w,{span:8},{default:t(()=>[e(m,{class:"info-card"},{header:t(()=>s[3]||(s[3]=[n("span",null,"内存使用率",-1)])),default:t(()=>[n("div",Y,[e(v,{type:"circle",percentage:o.memoryUsage,color:g(o.memoryUsage)},null,8,["percentage","color"]),n("p",null,a(o.memoryUsage)+"%",1)])]),_:1})]),_:1}),e(w,{span:8},{default:t(()=>[e(m,{class:"info-card"},{header:t(()=>s[4]||(s[4]=[n("span",null,"磁盘使用率",-1)])),default:t(()=>[n("div",A,[e(v,{type:"circle",percentage:o.diskUsage,color:g(o.diskUsage)},null,8,["percentage","color"]),n("p",null,a(o.diskUsage)+"%",1)])]),_:1})]),_:1})]),_:1})]),n("div",F,[s[6]||(s[6]=n("h3",null,"服务状态",-1)),e(T,{data:B.value,style:{width:"100%"}},{default:t(()=>[e(d,{prop:"name",label:"服务名称",width:"200"}),e(d,{prop:"port",label:"端口",width:"100"}),e(d,{prop:"status",label:"状态",width:"100"},{default:t(p=>[e(P,{type:p.row.status==="running"?"success":"danger"},{default:t(()=>[l(a(p.row.status==="running"?"运行中":"已停止"),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"uptime",label:"运行时间",width:"150"}),e(d,{prop:"memory",label:"内存占用",width:"120"}),e(d,{prop:"cpu",label:"CPU占用",width:"120"}),e(d,{label:"操作",width:"150"},{default:t(p=>[e(y,{type:p.row.status==="running"?"warning":"success",size:"small",onClick:E=>$(p.row)},{default:t(()=>[l(a(p.row.status==="running"?"停止":"启动"),1)]),_:2},1032,["type","onClick"]),e(y,{type:"info",size:"small",onClick:E=>x(p.row)},{default:t(()=>s[5]||(s[5]=[l(" 日志 ",-1)])),_:2,__:[5]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),n("div",H,[s[7]||(s[7]=n("h3",null,"系统详细信息",-1)),e(V,{column:2,border:""},{default:t(()=>[e(u,{label:"操作系统"},{default:t(()=>[l(a(c.os),1)]),_:1}),e(u,{label:"Java版本"},{default:t(()=>[l(a(c.javaVersion),1)]),_:1}),e(u,{label:"总内存"},{default:t(()=>[l(a(c.totalMemory),1)]),_:1}),e(u,{label:"可用内存"},{default:t(()=>[l(a(c.freeMemory),1)]),_:1}),e(u,{label:"CPU核心数"},{default:t(()=>[l(a(c.cpuCores),1)]),_:1}),e(u,{label:"系统启动时间"},{default:t(()=>[l(a(c.startTime),1)]),_:1}),e(u,{label:"系统运行时间"},{default:t(()=>[l(a(c.uptime),1)]),_:1}),e(u,{label:"当前时间"},{default:t(()=>[l(a(h.value),1)]),_:1})]),_:1})])]),_:1})])}}},te=I(X,[["__scopeId","data-v-ea055174"]]);export{te as default};
