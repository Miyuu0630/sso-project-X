import{_ as G,i as w,Y as I,m as E,a as U,o as b,b as e,w as l,r as d,f as V,n as J,e as _,a4 as M,B as j,$ as A,d as P,P as F,a0 as h,E as m}from"./main-0j-tL-il.js";const T={class:"enterprise-info"},X={class:"card-header"},Y=["src"],$={__name:"Info",setup(H){const c=w(),g=w(!1),o=I({name:"",creditCode:"",legalPerson:"",registeredCapital:"",establishDate:"",scale:"",industry:"",phone:"",address:"",description:"",logo:""}),k={name:[{required:!0,message:"请输入企业名称",trigger:"blur"}],creditCode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{pattern:/^[0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}$/,message:"请输入正确的统一社会信用代码",trigger:"blur"}],legalPerson:[{required:!0,message:"请输入法定代表人",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]},v=async()=>{try{const t=await h.get("/api/enterprise/info");t.data.code===200&&Object.assign(o,t.data.data)}catch(t){console.error("加载企业信息失败:",t),Object.assign(o,{name:"示例科技有限公司",creditCode:"91110000123456789X",legalPerson:"张三",registeredCapital:"1000",establishDate:"2020-01-01",scale:"medium",industry:"it",phone:"13800138000",address:"北京市朝阳区示例大厦",description:"这是一家专注于软件开发的科技公司",logo:""})}},x=async()=>{try{await c.value.validate(),g.value=!0;const t=await h.put("/api/enterprise/info",o);t.data.code===200?m.success("企业信息保存成功"):m.error(t.data.message||"保存失败")}catch(t){console.error("保存企业信息失败:",t),m.error("保存失败")}finally{g.value=!1}},B=()=>{var t;(t=c.value)==null||t.resetFields(),v()},D=t=>{const a=t.type==="image/jpeg"||t.type==="image/png",n=t.size/1024/1024<2;return a||m.error("上传头像图片只能是 JPG/PNG 格式!"),n||m.error("上传头像图片大小不能超过 2MB!"),a&&n},L=t=>{const a=new FileReader;a.onload=n=>{o.logo=n.target.result,m.success("LOGO上传成功")},a.readAsDataURL(t.file)};return E(()=>{v()}),(t,a)=>{const n=d("el-icon"),i=d("el-input"),s=d("el-form-item"),p=d("el-col"),f=d("el-row"),N=d("el-date-picker"),u=d("el-option"),y=d("el-select"),O=d("el-upload"),C=d("el-button"),R=d("el-form"),q=d("el-card");return b(),U("div",T,[e(q,null,{header:l(()=>[P("div",X,[e(n,null,{default:l(()=>[e(_(F))]),_:1}),a[10]||(a[10]=P("span",null,"企业信息",-1))])]),default:l(()=>[e(R,{ref_key:"formRef",ref:c,model:o,rules:k,"label-width":"120px",class:"enterprise-form"},{default:l(()=>[e(f,{gutter:20},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(s,{label:"企业名称",prop:"name"},{default:l(()=>[e(i,{modelValue:o.name,"onUpdate:modelValue":a[0]||(a[0]=r=>o.name=r),placeholder:"请输入企业名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(s,{label:"统一社会信用代码",prop:"creditCode"},{default:l(()=>[e(i,{modelValue:o.creditCode,"onUpdate:modelValue":a[1]||(a[1]=r=>o.creditCode=r),placeholder:"请输入统一社会信用代码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:20},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(s,{label:"法定代表人",prop:"legalPerson"},{default:l(()=>[e(i,{modelValue:o.legalPerson,"onUpdate:modelValue":a[2]||(a[2]=r=>o.legalPerson=r),placeholder:"请输入法定代表人"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(s,{label:"注册资本",prop:"registeredCapital"},{default:l(()=>[e(i,{modelValue:o.registeredCapital,"onUpdate:modelValue":a[3]||(a[3]=r=>o.registeredCapital=r),placeholder:"请输入注册资本"},{append:l(()=>a[11]||(a[11]=[V("万元",-1)])),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:20},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(s,{label:"成立日期",prop:"establishDate"},{default:l(()=>[e(N,{modelValue:o.establishDate,"onUpdate:modelValue":a[4]||(a[4]=r=>o.establishDate=r),type:"date",placeholder:"请选择成立日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(s,{label:"企业规模",prop:"scale"},{default:l(()=>[e(y,{modelValue:o.scale,"onUpdate:modelValue":a[5]||(a[5]=r=>o.scale=r),placeholder:"请选择企业规模",style:{width:"100%"}},{default:l(()=>[e(u,{label:"微型企业",value:"micro"}),e(u,{label:"小型企业",value:"small"}),e(u,{label:"中型企业",value:"medium"}),e(u,{label:"大型企业",value:"large"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:20},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(s,{label:"所属行业",prop:"industry"},{default:l(()=>[e(y,{modelValue:o.industry,"onUpdate:modelValue":a[6]||(a[6]=r=>o.industry=r),placeholder:"请选择所属行业",style:{width:"100%"}},{default:l(()=>[e(u,{label:"信息技术",value:"it"}),e(u,{label:"制造业",value:"manufacturing"}),e(u,{label:"金融业",value:"finance"}),e(u,{label:"服务业",value:"service"}),e(u,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(s,{label:"联系电话",prop:"phone"},{default:l(()=>[e(i,{modelValue:o.phone,"onUpdate:modelValue":a[7]||(a[7]=r=>o.phone=r),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"企业地址",prop:"address"},{default:l(()=>[e(i,{modelValue:o.address,"onUpdate:modelValue":a[8]||(a[8]=r=>o.address=r),placeholder:"请输入企业地址"},null,8,["modelValue"])]),_:1}),e(s,{label:"企业简介",prop:"description"},{default:l(()=>[e(i,{modelValue:o.description,"onUpdate:modelValue":a[9]||(a[9]=r=>o.description=r),type:"textarea",rows:4,placeholder:"请输入企业简介"},null,8,["modelValue"])]),_:1}),e(s,{label:"企业LOGO",prop:"logo"},{default:l(()=>[e(O,{class:"logo-uploader",action:"#","show-file-list":!1,"before-upload":D,"http-request":L},{default:l(()=>[o.logo?(b(),U("img",{key:0,src:o.logo,class:"logo"},null,8,Y)):(b(),J(n,{key:1,class:"logo-uploader-icon"},{default:l(()=>[e(_(M))]),_:1}))]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(C,{type:"primary",onClick:x,loading:g.value},{default:l(()=>[e(n,null,{default:l(()=>[e(_(j))]),_:1}),a[12]||(a[12]=V(" 保存信息 ",-1))]),_:1,__:[12]},8,["loading"]),e(C,{onClick:B},{default:l(()=>[e(n,null,{default:l(()=>[e(_(A))]),_:1}),a[13]||(a[13]=V(" 重置 ",-1))]),_:1,__:[13]})]),_:1})]),_:1},8,["model"])]),_:1})])}}},W=G($,[["__scopeId","data-v-e5011a73"]]);export{W as default};
