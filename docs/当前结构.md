# 项目结构说明

## 项目概述

本项目是一个基于 Spring Boot + Vue.js + Sa-Token 的单点登录（SSO）系统，包含服务端、客户端（前后端分离）和公共模块。

## 顶层目录结构

```
sso-project-X/
├── .git/                    # Git 版本控制
├── .idea/                   # IntelliJ IDEA 配置
├── db/                      # 数据库脚本和初始化数据
├── docs/                    # 项目文档
├── logs/                    # 日志文件
├── sso-server/              # SSO 服务端
├── sso-client-backend/      # 客户端后端
├── sso-client-frontend/     # 客户端前端
├── sso-common/              # 公共模块
├── src/                     # 静态资源
├── templates/               # 模板文件
├── README.md                # 项目说明
├── .gitignore               # Git 忽略规则
└── 参考文件之一.md          # 参考文档
```

## 目录详情

### 1. db/ （数据库脚本）
```
db/
├── data/                    # 初始化数据
│   ├── sso_init_data_original.sql
│   └── sso_init_data.sql
├── schema/                  # 数据库结构
│   ├── sso_complete_schema_original.sql
│   └── sso_database_schema.sql
└── README.md                # 数据库说明
```

### 2. docs/ （项目文档）
```
docs/
├── analysis/                # 项目分析文档
│   ├── check-project.md
│   ├── feature-comparison.md
│   └── sso-client-analysis-report.md
├── architecture/            # 架构设计文档
│   ├── architecture-design.md
│   └── sso-interaction-specification.md
├── deployment/              # 部署相关文档
│   ├── deploy.md
│   └── git-setup.md
├── guides/                  # 使用指南
│   ├── client-minimal-implementation.md
│   ├── project-structure-and-dependencies.md
│   ├── security-configuration.md
│   ├── server-implementation-guide.md
│   ├── SSO_INTEGRATION_GUIDE.md
│   ├── sso-feature-upgrade-plan.md
│   ├── sso-flow-implementation.md
│   ├── sso-troubleshooting.md
│   └── third-party-integration.md
├── MD5_PASSWORD_IMPLEMENTATION.md
├── MD5_PASSWORD_UPGRADE_SUMMARY.md
├── 升级规划.md
├── 项目目录结构说明.md
├── 项目目录结构重构方案.md
├── 项目目录结构重构方案-基于现有架构.md
└── 当前结构.md
```

### 3. sso-server/ （SSO 服务端）
```
sso-server/
├── logs/                    # 服务端日志
├── mvnw                     # Maven Wrapper
├── mvnw.cmd                 # Maven Wrapper (Windows)
├── pom.xml                  # Maven 依赖配置
├── README.md                # 服务端说明
├── RefreshTokenClientExample.js
└── src/
    ├── main/
    │   ├── java/org/example/ssoserver/
    │   │   ├── config/      # 配置类
    │   │   │   ├── PasswordConfig.java
    │   │   │   ├── RedisConfig.java
    │   │   │   ├── SaTokenConfig.java
    │   │   │   ├── SaTokenExceptionHandler.java
    │   │   │   ├── SecurityConfig.java
    │   │   │   └── WebConfig.java
    │   │   ├── controller/  # 控制器
    │   │   │   ├── AuthController.java
    │   │   │   ├── LoginPageController.java
    │   │   │   ├── PasswordTestController.java
    │   │   │   ├── PermissionController.java
    │   │   │   ├── SsoController.java
    │   │   │   ├── StaticResourceController.java
    │   │   │   └── UserController.java
    │   │   ├── dto/         # 数据传输对象
    │   │   │   ├── RefreshTokenInfo.java
    │   │   │   ├── RegisterRequest.java
    │   │   │   ├── RegisterResponse.java
    │   │   │   └── SsoTicketInfo.java
    │   │   ├── entity/      # 实体类
    │   │   │   ├── SysLoginLog.java
    │   │   │   ├── SysMenu.java
    │   │   │   ├── SysRole.java
    │   │   │   ├── SysRoleMenu.java
    │   │   │   ├── SysUser.java
    │   │   │   ├── SysUserRole.java
    │   │   │   └── UserDevice.java
    │   │   ├── mapper/      # MyBatis 映射接口
    │   │   ├── service/     # 服务接口和实现
    │   │   │   ├── impl/
    │   │   │   ├── AuthService.java
    │   │   │   ├── DeviceManagementService.java
    │   │   │   ├── PasswordService.java
    │   │   │   └── PermissionService.java
    │   │   ├── util/        # 工具类
    │   │   │   └── PasswordMigrationUtil.java
    │   │   └── SsoServerApplication.java # 启动类
    │   └── resources/
    │       ├── application.yml    # 服务端配置文件
    │       ├── mapper/            # MyBatis XML 文件
    │       ├── static/            # 静态资源
    │       └── templates/         # 模板文件
    │           ├── login.html
    │           └── register.html
    └── test/
        └── java/org/example/ssoserver/
            ├── config/
            ├── integration/
            ├── service/
            ├── GeneratePasswordHash.java
            ├── PasswordTest.java
            ├── RefreshTokenTest.java
            └── SsoServerApplicationTests.java
```

### 4. sso-client-backend/ （客户端后端）
```
sso-client-backend/
├── HELP.md                  # 帮助文档
├── logs/                    # 客户端日志
├── mvnw                     # Maven Wrapper
├── mvnw.cmd                 # Maven Wrapper (Windows)
├── pom.xml                  # Maven 依赖配置
├── README.md                # 客户端说明
└── src/
    ├── main/
    │   ├── java/org/example/ssoclient/
    │   │   ├── config/      # 客户端配置
    │   │   │   └── SsoClientConfig.java
    │   │   ├── controller/  # 控制器
    │   │   │   ├── RoleController.java
    │   │   │   └── SsoClientController.java
    │   │   ├── dto/         # 数据传输对象
    │   │   │   ├── MenuDTO.java
    │   │   │   ├── RoleInfoDTO.java
    │   │   │   └── UserInfoDTO.java
    │   │   ├── service/     # 服务层
    │   │   │   ├── impl/
    │   │   │   │   └── RolePermissionServiceImpl.java
    │   │   │   ├── RolePermissionService.java
    │   │   │   └── UserInfoService.java
    │   │   └── SsoClientApplication.java # 启动类
    │   └── resources/
    │       ├── application.yml    # 客户端配置文件
    │       └── static/            # 静态资源
    └── test/
        └── java/org/example/ssoclient/
            └── SsoClientApplicationTests.java
```

### 5. sso-client-frontend/ （客户端前端）
```
sso-client-frontend/
├── index.html               # 入口页面
├── package-lock.json        # 依赖锁定文件
├── package.json             # 前端依赖配置
├── README.md                # 前端说明
├── test-sso.html            # SSO 测试页面
├── vite.config.js           # Vite 构建配置
└── src/
    ├── api/                 # API 封装
    ├── components/          # 公共组件
    ├── config/              # 配置
    │   └── sso.js
    ├── constants/           # 常量定义
    ├── layouts/             # 布局组件
    ├── main.js              # 主入口文件
    ├── router/              # 路由配置
    │   └── index.js
    ├── services/            # 服务层
    ├── stores/              # 状态管理（Pinia）
    │   └── auth.js
    ├── utils/               # 工具函数
    │   └── request.js
    ├── views/               # 页面视图
    │   ├── 404.vue
    │   ├── admin/           # 管理员页面
    │   ├── airline/         # 航空公司页面
    │   │   ├── Flight.vue
    │   │   ├── Info.vue
    │   │   └── Passenger.vue
    │   ├── Callback.vue     # 回调页面
    │   ├── dashboard/       # 仪表盘页面
    │   │   ├── AdminDashboard.vue
    │   │   ├── AirlineDashboard.vue
    │   │   ├── EnterpriseDashboard.vue
    │   │   └── PersonalDashboard.vue
    │   ├── Dashboard.vue
    │   ├── enterprise/      # 企业页面
    │   │   ├── Auth.vue
    │   │   ├── Info.vue
    │   │   └── Member.vue
    │   ├── Home.vue
    │   ├── monitor/         # 监控页面
    │   │   ├── LoginLog.vue
    │   │   ├── Online.vue
    │   │   └── Server.vue
    │   ├── personal/        # 个人页面
    │   ├── Profile.vue
    │   ├── SsoTest.vue      # SSO 测试页面
    │   ├── system/          # 系统管理页面
    │   │   ├── Menu.vue
    │   │   ├── Role.vue
    │   │   └── User.vue
    │   ├── user/            # 用户中心页面
    │   │   ├── Device.vue
    │   │   ├── LoginLog.vue
    │   │   ├── OAuth.vue
    │   │   ├── Profile.vue
    │   │   └── Security.vue
    │   └── Users.vue
    └── App.vue              # 根组件
```

### 6. sso-common/ （公共模块）
```
sso-common/
├── COMMON_LAYER_FIX_SUMMARY.md
├── COMMON_LAYER_USAGE.md
├── mvnw                     # Maven Wrapper
├── mvnw.cmd                 # Maven Wrapper (Windows)
├── pom.xml                  # Maven 依赖配置
├── README.md                # 公共模块说明
└── src/
    └── main/
        └── java/org/example/common/
            ├── annotation/   # 自定义注解
            ├── config/       # 公共配置
            ├── constants/    # 常量定义
            │   └── CommonConstants.java
            ├── dto/          # 数据传输对象
            │   ├── LoginRequest.java
            │   ├── LoginResponse.java
            │   ├── MenuDTO.java
            │   ├── RoleDTO.java
            │   ├── UserDeviceDTO.java
            │   └── UserDTO.java
            ├── entity/       # 公共实体类
            ├── enums/        # 枚举定义
            │   ├── DeviceType.java
            │   ├── Gender.java
            │   ├── LoginType.java
            │   ├── OAuthProvider.java
            │   ├── SecurityEventType.java
            │   └── UserType.java
            ├── exception/    # 异常处理
            │   ├── BusinessException.java
            │   └── GlobalExceptionHandler.java
            ├── model/        # 通用模型
            │   ├── ApiResponse.java
            │   ├── MenuDTO.java
            │   ├── OAuthBindingDTO.java
            │   ├── PageResult.java
            │   ├── RoleDTO.java
            │   ├── UserDeviceDTO.java
            │   └── UserDTO.java
            ├── result/       # 统一返回结果
            │   ├── Result.java
            │   └── ResultCode.java
            ├── util/         # 工具类
            │   ├── DesensitizeUtil.java
            │   ├── DeviceUtil.java
            │   └── EncryptUtil.java
            └── vo/           # 视图对象
```

### 7. src/ （静态资源）
```
src/
└── main/
    └── resources/
        └── static/
            ├── assets/       # 静态资源文件
            │   ├── *.css     # 样式文件
            │   ├── *.js      # JavaScript 文件
            │   └── index.html
```

### 8. templates/ （模板文件）
```
templates/
├── login.html               # 登录页面模板
├── register.html            # 注册页面模板
├── server-auth-controller-design.java
├── sso-server-controller-enhanced.java
├── vue-auth-store.js        # Vue 状态管理模板
├── vue-login-page.vue       # Vue 登录页面模板
└── vue-router-config.js     # Vue 路由配置模板
```

## 技术栈

- **后端**: Spring Boot + MyBatis + Sa-Token + Redis
- **前端**: Vue.js + Vite + Pinia + Vue Router
- **数据库**: MySQL
- **构建工具**: Maven (后端) + npm (前端)
- **认证框架**: Sa-Token SSO

## 模块说明

1. **sso-server**: 核心认证服务，提供用户认证、授权、SSO 票据验证等功能
2. **sso-client-backend**: 客户端后端服务，处理业务逻辑和权限验证
3. **sso-client-frontend**: 客户端前端应用，提供用户界面
4. **sso-common**: 公共模块，包含共享的 DTO、工具类、常量等
5. **db**: 数据库脚本和初始化数据
6. **docs**: 项目文档和指南
7. **templates**: 各种模板文件，用于快速开发

## 开发说明

- 后端服务使用 Maven 进行依赖管理和构建
- 前端使用 Vite 作为构建工具
- 所有模块都遵循标准的 Java 包结构
- 前端组件按功能模块进行组织
- 文档按类型和用途进行分类管理